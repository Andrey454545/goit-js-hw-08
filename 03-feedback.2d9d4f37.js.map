{"mappings":"gfACA,IAAAA,EAAAC,EAAA,SAGMC,EAAOC,SAASC,cAAc,iBAC9BC,EAAQF,SAASC,cAAc,uBAC/BE,EAAUH,SAASC,cAAc,4BACjCG,EAAmB,sBAGCL,EAArBM,iBACD,SACA,EAAAR,EAAAS,WAAS,SAAAC,GAEkD,IAAjDC,EAAe,CAACC,MAAOP,EAAMQ,MAAOC,QAASR,EAAQO,OAI3BE,aAAnBC,QAAQT,EAAkBU,KAAKC,UAAUP,G,GACvD,MAImBT,EAArBM,iBAAiB,UAAU,SAAAE,GAKI,GAHhCA,EAAES,iBAGkB,KAAhBd,EAAMQ,OAAkC,KAAlBP,EAAQO,MAC9B,OAAOO,MAAM,uBAIwCC,QAAjDC,IAAI,CAACV,MAAOP,EAAMQ,MAAOC,QAASR,EAAQO,QAElDX,EAAKqB,QACYR,aAAJS,WAAWjB,E,IAIiC,IAavDkB,EAbO,SAAAC,GACT,IACI,IAAMC,EAAkBZ,aAAaa,QAAQF,GAGI,OAAtB,OAApBC,OAA2BE,EAAYZ,KAAKa,MAAMH,E,CACzD,MAAOI,GAE0BV,QAAzBU,MAAM,oBAAqBA,EAAMjB,Q,EAK7BkB,CAAKzB,GAIrBkB,IACApB,EAAMQ,MAAQY,EAAYb,MAC1BN,EAAQO,MAAQY,EAAYX,Q","sources":["src/js/03-feedback.js"],"sourcesContent":["\nimport { throttle } from 'lodash';\n\n// пошук елементів на сторінці\nconst form = document.querySelector('feedback-form');\nconst email = document.querySelector('input[name=\"email\"]');\nconst message = document.querySelector('textarea[name=\"message\"]');\nconst LOCALSTORAGE_KEY = 'feedback-form-state'; // ключ для сховища\n\n// додаємо слухача події input до форми\nform.addEventListener(\n    'input',\n    throttle(e => {\n        // обєкт з полями email і message, у яких зберігаються поточні значення полів форми\n        const objectToSave = {email: email.value, message: message.value};\n\n        // записування у локальне сховище обєкта з полями\n        // JSON.stringify - коментування JS-значень у формат строки JSON \n        localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(objectToSave));\n    }, 500) // оновлення сховища раз на 500 ms\n);\n\n// додаємо слухача подій submit до форми\nform.addEventListener('submit', e => {\n\n    e.preventDefault(); // відміна оновлення сторінки\n\n    // перевірка чи заповнені всі поля форми\n    if (email.value === '' || message.value === '') {\n        return alert('Заповніть всі поля!');\n    }\n\n    // виведення у консоль обєкта з полями та їхніми поточними значеннями\n    console.log({email: email.value, message: message.value});\n\n    form.reset(); // очищення поля форми\n    localStorage.removeItem(LOCALSTORAGE_KEY);   // очищення сховища\n});\n\n// метод load який буде абстрагувати повторюваний код перевірки помилок парса\nconst load = key => {\n    try {\n        const serializedState = localStorage.getItem(key); // ключ елемента сховища\n    \n        // якщо елемента немає - повернути undefined, інакше розпарсити елемент\n        return serializedState === null ? undefined : JSON.parse(serializedState);\n    }   catch (error) {\n        // в разі помилки повернути повідомлення\n        console.error('Get state error: ', error.message);\n    }\n};\n\n// присвоення ключа до сховища через метод load\nconst storageDate = load(LOCALSTORAGE_KEY);\n\n// перевірка стану сховища\n// якщо в сховищі є збережені дані - заповнити ними поля форми \nif (storageDate) {\n    email.value = storageDate.email;\n    message.value = storageDate.message;\n} // в іншому випадку поля будуть порожніми\n\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$form","document","querySelector","$b00c40859be242c5$var$email","$b00c40859be242c5$var$message","$b00c40859be242c5$var$LOCALSTORAGE_KEY","addEventListener","throttle","e","objectToSave","email","value","message","localStorage","setItem","JSON","stringify","preventDefault","alert","console","log","reset","removeItem","$b00c40859be242c5$var$storageDate","key","serializedState","getItem","undefined","parse","error","$b00c40859be242c5$var$load"],"version":3,"file":"03-feedback.2d9d4f37.js.map"}